<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografia SPA: DNS Bind9 a Linux Debian</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Palette: Brilliant Blues -->
    <!-- #CAF0F8 (Pale Cyan), #90E0EF (Light Cyan), #00B4D8 (Cyan), #0077B6 (Star Command Blue), #03045E (Dark Blue) -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #CAF0F8;
        }
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            transition: all 0.3s ease-in-out;
            border-top: 4px solid #0077B6;
        }
        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }
        .step-number {
            background-color: #00B4D8;
            color: white;
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.25rem;
            margin: 0 auto 1rem auto;
            box-shadow: 0 0 0 4px #90E0EF;
        }
        .code-block {
            background-color: #03045E;
            color: #CAF0F8;
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-family: monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin-top: 0.5rem;
        }
        .arrow-down {
            text-align: center;
            color: #0077B6;
            font-size: 1.5rem;
            margin: 1rem 0;
        }
        @media (min-width: 768px) {
            .arrow-right {
                position: absolute;
                right: -1.5rem;
                top: 50%;
                transform: translateY(-50%);
                color: #0077B6;
                font-size: 1.5rem;
                z-index: 10;
            }
            .grid-flow-col-md > div {
                position: relative;
            }
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">

        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#0077B6] mb-2">DNS amb Bind9</h1>
            <h2 class="text-xl md:text-2xl text-[#0096C7] font-semibold">Infografia Interactiva | Linux Debian</h2>
            <p class="text-gray-600 mt-4 max-w-2xl mx-auto">
                Guia visual pas a pas per configurar un servidor de noms (DNS) utilitzant el paquet est√†ndard <strong>Bind9</strong>.
                Basat en la pr√†ctica del M√≤dul 0227 (SMX).
            </p>
        </header>

        <!-- Section 1: Entorn -->
        <section class="mb-12">
            <div class="flex items-center mb-6">
                <span class="bg-[#0077B6] text-white px-3 py-1 rounded-full text-sm font-bold mr-3">FASE 1</span>
                <h3 class="text-2xl font-bold text-[#03045E]">Arquitectura del Laboratori</h3>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Server Card -->
                <div class="card text-center">
                    <div class="text-5xl mb-4">üêß</div>
                    <h4 class="text-xl font-bold text-[#0077B6]">Servidor DNS</h4>
                    <p class="text-sm text-gray-500 mb-4">Debian Linux</p>
                    <ul class="text-left text-sm space-y-2 bg-blue-50 p-3 rounded">
                        <li><strong>Paquet:</strong> bind9</li>
                        <li><strong>IP:</strong> 192.168.1.100</li>
                        <li><strong>Arxiu Conf:</strong> /etc/bind/</li>
                    </ul>
                </div>

                <!-- Network Card -->
                <div class="card text-center">
                    <div class="text-5xl mb-4">üåç</div>
                    <h4 class="text-xl font-bold text-[#0077B6]">Zona de Domini</h4>
                    <p class="text-sm text-gray-500 mb-4">Espai de Noms</p>
                    <ul class="text-left text-sm space-y-2 bg-blue-50 p-3 rounded">
                        <li><strong>Domini:</strong> smx.local</li>
                        <li><strong>Xarxa:</strong> 192.168.1.0/24</li>
                        <li><strong>Forwarders:</strong> 8.8.8.8 (Google)</li>
                    </ul>
                </div>

                <!-- Client Card -->
                <div class="card text-center">
                    <div class="text-5xl mb-4">üíª</div>
                    <h4 class="text-xl font-bold text-[#0077B6]">Client de Proves</h4>
                    <p class="text-sm text-gray-500 mb-4">Linux / Windows</p>
                    <ul class="text-left text-sm space-y-2 bg-blue-50 p-3 rounded">
                        <li><strong>Config DNS:</strong> Manual</li>
                        <li><strong>Server IP:</strong> 192.168.1.100</li>
                        <li><strong>Eina:</strong> dig / nslookup</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 2: Configuraci√≥ Pas a Pas -->
        <section class="mb-12">
            <div class="flex items-center mb-6">
                <span class="bg-[#0077B6] text-white px-3 py-1 rounded-full text-sm font-bold mr-3">FASE 2</span>
                <h3 class="text-2xl font-bold text-[#03045E]">Flux de Configuraci√≥ Bind9</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 grid-flow-col-md">
                
                <!-- Step 1 -->
                <div class="card relative">
                    <div class="step-number">1</div>
                    <h4 class="text-lg font-bold text-center mb-2">Instal¬∑laci√≥</h4>
                    <p class="text-sm text-gray-600 mb-2">Actualitzar repositoris i instal¬∑lar els paquets necessaris.</p>
                    <div class="code-block">apt install bind9 bind9-utils</div>
                    <div class="hidden md:block arrow-right">‚ñ∂</div>
                </div>

                <!-- Step 2 -->
                <div class="card relative">
                    <div class="step-number">2</div>
                    <h4 class="text-lg font-bold text-center mb-2">Zones Locals</h4>
                    <p class="text-sm text-gray-600 mb-2">Definir on s√≥n els fitxers de la zona directa i inversa.</p>
                    <div class="code-block">/etc/bind/named.conf.local</div>
                    <div class="hidden md:block arrow-right">‚ñ∂</div>
                </div>

                <!-- Step 3 -->
                <div class="card relative">
                    <div class="step-number">3</div>
                    <h4 class="text-lg font-bold text-center mb-2">Fitxers DB</h4>
                    <p class="text-sm text-gray-600 mb-2">Crear els fitxers de base de dades (A, PTR, NS) a partir de plantilles.</p>
                    <div class="code-block">cp db.local db.smx.local</div>
                    <div class="hidden md:block arrow-right">‚ñ∂</div>
                </div>

                <!-- Step 4 -->
                <div class="card relative">
                    <div class="step-number">4</div>
                    <h4 class="text-lg font-bold text-center mb-2">Validaci√≥</h4>
                    <p class="text-sm text-gray-600 mb-2">Comprovar sintaxi i reiniciar el dimoni.</p>
                    <div class="code-block">named-checkconf<br>systemctl restart bind9</div>
                </div>

            </div>
        </section>

        <!-- Section 3: Visualitzaci√≥ de Dades i Diagn√≤stic -->
        <section class="mb-12 grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Chart Column -->
            <div class="card">
                <h3 class="text-xl font-bold text-[#0077B6] mb-4">Estructura de Registres (Fitxers de Zona)</h3>
                <p class="text-sm text-gray-600 mb-4">
                    Distribuci√≥ t√≠pica dels tipus de registres que hem configurat dins dels fitxers <code>db.smx.local</code> i <code>db.192</code>.
                </p>
                <div class="chart-container">
                    <canvas id="dnsRecordsChart"></canvas>
                </div>
                <div class="mt-4 text-xs text-gray-500 text-center">
                    * SOA (Start of Authority) i NS (Name Server) s√≥n obligatoris per a cada zona.
                </div>
            </div>

            <!-- Validation Column -->
            <div class="card flex flex-col justify-between">
                <div>
                    <h3 class="text-xl font-bold text-[#0077B6] mb-4">Diagn√≤stic amb DIG</h3>
                    <p class="text-gray-700 mb-4">
                        L'eina <code>dig</code> (Domain Information Groper) √©s la m√©s fiable per comprovar que el nostre servidor Debian respon correctament.
                    </p>

                    <div class="bg-blue-50 rounded-lg p-4 mb-4 border-l-4 border-[#00B4D8]">
                        <h5 class="font-bold text-[#03045E] mb-1">Prova Directa (Nom ‚Üí IP)</h5>
                        <code class="text-sm block bg-white p-2 rounded border border-blue-100 text-[#0077B6]">
                            $ dig @192.168.1.100 www.smx.local
                        </code>
                        <p class="text-xs text-gray-500 mt-1">Busca a la secci√≥ "ANSWER SECTION" la IP 192.168.1.100.</p>
                    </div>

                    <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-[#00B4D8]">
                        <h5 class="font-bold text-[#03045E] mb-1">Prova Inversa (IP ‚Üí Nom)</h5>
                        <code class="text-sm block bg-white p-2 rounded border border-blue-100 text-[#0077B6]">
                            $ dig @192.168.1.100 -x 192.168.1.100
                        </code>
                        <p class="text-xs text-gray-500 mt-1">Ha de retornar "www.smx.local." (amb el punt final).</p>
                    </div>
                </div>
                
                <div class="mt-6 bg-[#CAF0F8] p-4 rounded text-center">
                    <span class="font-bold text-[#03045E]">Estat del Servei:</span>
                    <br>
                    <code class="text-sm">systemctl status bind9</code>
                    <br>
                    <span class="text-xs text-green-700 font-bold">‚óè active (running)</span>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm py-6 border-t border-blue-200">
            <p class="font-bold mt-1 text-[#0077B6]">Ra√ºl Saiz Laud√≥</p>
            <!-- No comments confirming tools used, per instructions -->
        </footer>

    </div>

    <script>
        // Chart.js Configuration
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('dnsRecordsChart').getContext('2d');
            
            // Labels with wrapping logic handled in tooltip callback
            const labels = [
                'Registres A (Hosts)', 
                'Registres PTR (Punters)', 
                'Registres NS (Name Server)', 
                'Registres SOA (Autoritat)'
            ];

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: [3, 3, 2, 2], // 3 Hosts (srv, www, ftp), 3 PTRs, 2 NS (1 per zona), 2 SOA (1 per zona)
                        backgroundColor: [
                            '#0077B6', // Star Command Blue
                            '#00B4D8', // Cyan
                            '#90E0EF', // Light Cyan
                            '#03045E'  // Dark Blue
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff',
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 12
                                },
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(3, 4, 94, 0.9)',
                            padding: 12,
                            callbacks: {
                                title: function(tooltipItems) {
                                    const item = tooltipItems[0];
                                    let label = item.chart.data.labels[item.dataIndex];
                                    if (Array.isArray(label)) {
                                      return label.join(' ');
                                    } else {
                                      return label;
                                    }
                                },
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' entrades';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    layout: {
                        padding: 10
                    }
                }
            });
        });
    </script>
</body>
</html>
